deptrac:
  paths:
    - ./src
  exclude_files: ~
  layers:
    # Application layers
    - name: Domain
      collectors:
        - type: classLike
          value: App\\Domain\\.*
    - name: Application
      collectors:
        - type: classLike
          value: App\\Application\\.*
    - name: Infrastructure
      collectors:
        - type: classLike
          value: App\\Infrastructure\\.*

    # External libraries
    - name: Assertions
      collectors:
        - type: classLike
          value: WebMozart\\Assert\\.*
    - name: MongoDB
      collectors:
        - type: classLike
          value: ^MongoDB\\.*
    - name: SymfonySerializer
      collectors:
        - type: classLike
          value: Symfony\\Component\\Serializer\\.*

  ruleset:
    Domain:
      - Assertions
    Application:
      - Domain
    Infrastructure:
      - Application
      - Domain
      - MongoDB
      - SymfonySerializer
