deptrac:
  paths:
    - ./src
  exclude_files: ~
  layers:
    # Application layers
    - name: Domain
      collectors:
        - type: classLike
          value: App\\Domain\\.*
    - name: Application
      collectors:
        - type: classLike
          value: App\\Application\\.*
    - name: Infrastructure
      collectors:
        - type: classLike
          value: App\\Infrastructure\\.*

    # External libraries
    - name: Assertions
      collectors:
        - type: classLike
          value: WebMozart\\Assert\\.*
    - name: PSR
      collectors:
        - type: classLike
          value: Psr\\.*
    - name: MongoDB
      collectors:
        - type: classLike
          value: ^MongoDB\\.*
    - name: Symfony
      collectors:
        - type: classLike
          value: Symfony\\.*
    - name: ApiPlatform
      collectors:
        - type: classLike
          value: ApiPlatform\\.*
    - name: LexikJWT
      collectors:
        - type: classLike
          value: Lexik\\Bundle\\JWTAuthenticationBundle\\.*

  ruleset:
    Domain:
      - Assertions
    Application:
      - Domain
      - PSR
    Infrastructure:
      - Application
      - Domain
      - PSR
      - MongoDB
      - Symfony
      - ApiPlatform
      - LexikJWT
