deptrac:
  paths:
    - ./src
  exclude_files: ~
  layers:
    # Application layers
    - name: Domain
      collectors:
        - type: classLike
          value: App\\Domain\\.*
    - name: Application
      collectors:
        - type: classLike
          value: App\\Application\\.*
    - name: Infrastructure
      collectors:
        - type: classLike
          value: App\\Infrastructure\\.*

    # External libraries
    - name: Assertions
      collectors:
        - type: classLike
          value: WebMozart\\Assert\\.*
    - name: PSR
      collectors:
        - type: classLike
          value: Psr\\.*
    - name: MongoDB
      collectors:
        - type: classLike
          value: ^MongoDB\\.*
    - name: SymfonySerializer
      collectors:
        - type: classLike
          value: Symfony\\Component\\Serializer\\.*
    - name: SymfonyMessenger
      collectors:
        - type: classLike
          value: Symfony\\Component\\Messenger\\.*
    - name: SymfonyValidator
      collectors:
        - type: classLike
          value: Symfony\\Component\\Validator\\.*
    - name: SymfonyUid
      collectors:
        - type: classLike
          value: Symfony\\Component\\Uid\\.*
    - name: SymfonyHttpKernel
      collectors:
        - type: classLike
          value: Symfony\\Component\\HttpKernel\\.*
    - name: SymfonyHttpFoundation
      collectors:
        - type: classLike
          value: Symfony\\Component\\HttpFoundation\\.*
    - name: SymfonyEventDispatcher
      collectors:
        - type: classLike
          value: Symfony\\Component\\EventDispatcher\\.*
    - name: SymfonyConsole
      collectors:
        - type: classLike
          value: Symfony\\Component\\Console\\.*
    - name: ApiPlatform
      collectors:
        - type: classLike
          value: ApiPlatform\\.*
    - name: LexikJWT
      collectors:
        - type: classLike
          value: Lexik\\Bundle\\JWTAuthenticationBundle\\.*
    - name: SymfonySecurity
      collectors:
        - type: classLike
          value: Symfony\\Component\\Security\\.*
    - name: SymfonyDependencyInjection
      collectors:
        - type: classLike
          value: Symfony\\Component\\DependencyInjection\\.*

  ruleset:
    Domain:
      - Assertions
    Application:
      - Domain
      - PSR
    Infrastructure:
      - Application
      - Domain
      - PSR
      - MongoDB
      - SymfonySerializer
      - SymfonyMessenger
      - SymfonyValidator
      - SymfonyUid
      - SymfonyHttpKernel
      - SymfonyHttpFoundation
      - SymfonyEventDispatcher
      - SymfonyConsole
      - SymfonyDependencyInjection
      - ApiPlatform
      - LexikJWT
      - SymfonySecurity
