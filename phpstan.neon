includes:
  - vendor/larastan/larastan/extension.neon
  - vendor/pestphp/pest/extension.neon

parameters:
  paths:
    - app
    - database
    - tests
  level: 10

  # Exclude Pest configuration file (contains test setup magic)
  excludePaths:
    - tests/Pest.php

  # Ignore errors about undefined methods in test closures
  # Pest binds $this to Tests\TestCase which extends Laravel's TestCase
  ignoreErrors:
    - '#Call to an undefined method PHPUnit\\Framework\\TestCase::(get|post|put|patch|delete|postJson|getJson|putJson|patchJson|deleteJson|withoutMiddleware|actingAs|assertDatabaseHas|assertDatabaseMissing)#'
    # Level 10 strictness - test response methods return TestResponse but inferred as mixed in tests
    - '#Cannot call method assert.* on mixed#'
